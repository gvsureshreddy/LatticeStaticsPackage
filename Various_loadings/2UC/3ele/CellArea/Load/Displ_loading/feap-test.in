# -*- mode: Perl -*-
# Main Parameters

# Main LatticeStatics Program Parameters
%Main = (FieldWidth     => 20,
         Precision      => 12,
         );

# Lattice Parameters
$DEG2RAD = atan2(1,1)*4/180;
$PI = atan2(1,1)*4.0;

%Lattice = (Type            => FEAP,
            LSKAnalysis    => None,
            TurningPointRestarts => Yes,
            FEAP => {FEAPInputFileName => Ihoney,
                     Tolerance         => 1.0e-10, # for numerical derivatives
                     Nbn             => 14,
                     PhantomEnergyEpsilon => 1.0,
                     Nuc => 4,
                     BoundNodes => [1, 21, 23, 59, 2, 58, 22], 
                     PeriodicNodes => [41, 60, 6, 43, 61, 5, 42], 
                     Loading => { Type => DisplacementControl, #DeadLoad, PressureLoad
                                  # BioStress => [[-1.0, 0.0],[0.0, -1.0]],
                                  StretchRatio => 1.0,
                                },     
                     ExtraTestFunctions => { Type =>  None, #BlochWaveAnalysis, #LoadingParameter,  
                                             AnalysisType => KVectors,                    
                                             DynamicalStiffnessInfo => [[1,0,15,1],[1,1,17,2],[0,1,19,3]],
                                             KVectors => [[0.0,0.0],[0.0,0.5],[0.5,0.0],[0.5,0.5]],
                     }
            }
    );
  
#  Restriction Parameters
% Restriction = (Type           =>  RestrictToTranslatedSubSpace, # NoRestriction, #
                 RestrictToTranslatedSubSpace => { ProjectionMatrix =>
[[-0.0000000000000001,0.0000000000000001,0.0000000000000000,0.0000000000000001,0.0000000000000001,0.0000000000000000,0.0000000000000001,-0.0000000000000001,0.0000000000000000,0.0000000000000001,-0.0000000000000001,0.0000000000000000,-0.0000000000000001,-0.0000000000000000,0.0000000000000000,-0.0000000000000001,-0.0000000000000000,0.0000000000000000,-0.0000000000000001,-0.0000000000000000,0.0000000000000000,0.0000000000000001,-0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000001,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.1767766952966368,-0.1020620726159659,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000001,0.2041241452319315,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,-0.1767766952966370,-0.1020620726159657,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,-0.1767766952966368,0.1020620726159658,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,-0.0000000000000001,-0.2041241452319315,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.1767766952966369,0.1020620726159657,0.0000000000000000,0.0000000000000000,0.0000000000000001,0.0000000000000000,-0.0000000000000001,-0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.1767766952966368,-0.1020620726159659,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000001,0.2041241452319315,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,-0.1767766952966370,-0.1020620726159657,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,-0.1767766952966368,0.1020620726159658,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,-0.0000000000000001,-0.2041241452319315,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.1767766952966369,0.1020620726159657,0.0000000000000000,0.0000000000000001,-0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.1767766952966368,-0.1020620726159659,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000001,0.2041241452319315,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,-0.1767766952966370,-0.1020620726159657,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,-0.1767766952966368,0.1020620726159658,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,-0.0000000000000001,-0.2041241452319315,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.1767766952966369,0.1020620726159657,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.1767766952966368,-0.1020620726159659,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000001,0.2041241452319315,0.0000000000000000,0.0000000000000000,-0.0000000000000001,0.0000000000000000,-0.1767766952966370,-0.1020620726159657,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,-0.1767766952966368,0.1020620726159658,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,-0.0000000000000001,-0.2041241452319315,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.1767766952966369,0.1020620726159657,0.0000000000000000],
[-0.0000000000000002,-0.0000000000000001,0.0000000000000000,0.0000000000000000,-0.0000000000000001,0.0000000000000000,0.0000000000000001,0.0000000000000001,0.0000000000000000,0.0000000000000001,0.0000000000000001,0.0000000000000000,0.0000000000000001,-0.0000000000000001,0.0000000000000000,0.0000000000000001,-0.0000000000000000,0.0000000000000000,0.0000000000000001,-0.0000000000000000,0.0000000000000000,-0.0000000000000001,-0.0000000000000003,0.0000000000000000,-0.0000000000000000,-0.0000000000000001,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.1766382266253907,-0.1019821276913475,0.0000000000000000,0.0069954910218733,-0.0040388486245922,0.0000000000000000,0.0000000000000001,0.2039642553826949,0.0000000000000000,0.0000000000000000,0.0080776972491843,0.0000000000000000,-0.1766382266253908,-0.1019821276913474,0.0000000000000000,-0.0069954910218733,-0.0040388486245922,0.0000000000000000,-0.1766382266253907,0.1019821276913475,0.0000000000000000,-0.0069954910218733,0.0040388486245921,0.0000000000000000,-0.0000000000000001,-0.2039642553826949,0.0000000000000000,-0.0000000000000000,-0.0080776972491843,0.0000000000000000,0.1766382266253908,0.1019821276913474,0.0000000000000000,0.0069954910218733,0.0040388486245922,0.0000000000000000,-0.0000000000000000,-0.0000000000000001,0.0000000000000000,0.0000000000000001,-0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.1766382266253907,-0.1019821276913475,0.0000000000000000,0.0069954910218733,-0.0040388486245922,0.0000000000000000,0.0000000000000001,0.2039642553826949,0.0000000000000000,0.0000000000000000,0.0080776972491843,0.0000000000000000,-0.1766382266253908,-0.1019821276913474,0.0000000000000000,-0.0069954910218733,-0.0040388486245922,0.0000000000000000,-0.1766382266253907,0.1019821276913475,0.0000000000000000,-0.0069954910218733,0.0040388486245921,0.0000000000000000,-0.0000000000000001,-0.2039642553826949,0.0000000000000000,-0.0000000000000000,-0.0080776972491843,0.0000000000000000,0.1766382266253908,0.1019821276913474,0.0000000000000000,0.0069954910218733,0.0040388486245922,0.0000000000000000,0.0000000000000000,0.0000000000000001,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.1766382266253907,-0.1019821276913475,0.0000000000000000,0.0069954910218733,-0.0040388486245922,0.0000000000000000,0.0000000000000001,0.2039642553826949,0.0000000000000000,0.0000000000000000,0.0080776972491843,0.0000000000000000,-0.1766382266253908,-0.1019821276913474,0.0000000000000000,-0.0069954910218733,-0.0040388486245920,0.0000000000000000,-0.1766382266253907,0.1019821276913475,0.0000000000000000,-0.0069954910218733,0.0040388486245921,0.0000000000000000,-0.0000000000000001,-0.2039642553826949,0.0000000000000000,-0.0000000000000000,-0.0080776972491843,0.0000000000000000,0.1766382266253908,0.1019821276913474,0.0000000000000000,0.0069954910218733,0.0040388486245922,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.0000000000000000,0.1766382266253907,-0.1019821276913475,0.0000000000000000,0.0069954910218733,-0.0040388486245922,0.0000000000000000,0.0000000000000001,0.2039642553826949,0.0000000000000000,0.0000000000000000,0.0080776972491843,0.0000000000000000,-0.1766382266253908,-0.1019821276913476,0.0000000000000000,-0.0069954910218733,-0.0040388486245922,0.0000000000000000,-0.1766382266253907,0.1019821276913475,0.0000000000000000,-0.0069954910218733,0.0040388486245921,0.0000000000000000,-0.0000000000000001,-0.2039642553826949,0.0000000000000000,-0.0000000000000000,-0.0080776972491843,0.0000000000000000,0.1766382266253908,0.1019821276913474,0.0000000000000000,0.0069954910218733,0.0040388486245922,0.0000000000000000]],
                                      }   
);

# SolutionMethod Parameters
$ArcLenDSMax = 0.01;

       
%SolutionMethod = (Type               => NewtonPCSolution, # RefineEqbmSolution, ArcLengthSolution, ScanningSolution, NewtonPCSolution
                   NewtonPCSolution   => {UpdateType       => QRUpdate, # Default value = QRUpdate; NoUpdate, StiffnessUpdate, Exact
                                          NumSolutions        => 1000,
					  BisectCP	      => Yes,
                                          MaxDS               => 0.001,
                                          CurrentDS           => 0.001,
                                          MinDS               => 1e-12,
                                          Contraction         => 0.1,
                                          Distance            => 0.005,
                                          Angle               => 10*$DEG2RAD,
                                          ConvergeCriteria    => 1e-12,
                                          #ConvergeType        => Both, # Default value = Both, Force, Displacement
                                          #ClosedLoopStart     => 30, # Default value = 30
                                          MaxCumulativeArcLength => 0.1,
                                          #StopAtCPCrossingNum => -1, # Default value = -1
                                          Direction           => -1, # Default value = 1
                                          #Acceleration        => 2.0, # Default value = 2.0
                                          #StopAtMinDS         => Yes # Default value = Yes, No
                                         },
                   RefineEqbmSolution => {ConvergeCriteria => 1e-13 #,
                                         }
                  );
